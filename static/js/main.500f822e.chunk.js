(this["webpackJsonpbest-office"]=this["webpackJsonpbest-office"]||[]).push([[0],{22:function(e,t,a){e.exports=a(48)},27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(27),a(6)),s=a(7),l=a(4),u=a.n(l),d=a(8),m=a(50),f=a(49),p=a(9),h=a.n(p),g=a(20),v=Object(g.setupCache)({maxAge:9e5});function y(e){return{baseURL:e,headers:{"Content-type":"application/json; charset=UTF-8",Accept:"application/json"},adapter:v.adapter}}var b={params:{apikey:"KIsxW2j8Qw9VyvXuc2WmCan2NI6amr3O",metric:!0}},E=h.a.create(y("https://dataservice.accuweather.com")),j=function(e){return E.get("/forecasts/v1/daily/5day/".concat(e),b)},O={loading:!1,data:null};var w=function(){var e=Object(n.useState)(O),t=Object(s.a)(e,2),a=t[0],r=a.data,c=a.loading,i=t[1];function l(){return(l=Object(d.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=3,j(249758);case 3:return t=e.sent,e.next=6,j(308526);case 6:return a=e.sent,e.next=9,j(187423);case 9:n=e.sent,r=[{location:"Amsterdam",forecast:t.data},{location:"Madrid",forecast:a.data},{location:"Budapest",forecast:n.data}],c=r.sort((function(e,t){return t.forecast.Headline.Severity-e.forecast.Headline.Severity})),i((function(e){return Object(o.a)({},e,{data:c,loading:!1})}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return[function(){return l.apply(this,arguments)},{data:r,loading:c}]},x=a(51),k=h.a.create(y("https://api.skypicker.com/")),N=function(e,t){return k.get("/locations",{params:{radius:50,type:"radius",locale:"en-US",location_types:"airport",limit:10,active_only:!0,sort:"name",lat:e,lon:t}})},L={loading:!1,data:null,currentLocation:null};var M=function(){var e=Object(n.useState)(L),t=Object(s.a)(e,2),a=t[0],r=a.data,c=a.currentLocation,i=a.loading,l=t[1];function p(){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,n=a.latitude,r=a.longitude;e({latitude:n,longitude:r})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return[{city:"Amsterdam",code:"AMS"},{city:"Madrid",code:"MAD"},{city:"Budapest",code:"BUD"}].map(function(){var a=Object(d.a)(u.a.mark((function a(n){var r,c,i,o,s,l,d,p,h;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.city,c=n.code,i=[],o=new Date,s=Object(m.a)(o,"dd/MM/yyyy"),l=Object(x.a)(o,{days:4}),d=Object(m.a)(l,"dd/MM/yyyy"),e===c){a.next=11;break}return a.next=9,u=e,g=c,v=s,y=d,b=t,k.get("/flights",{params:{flyFrom:u,to:g,dateFrom:v,dateTo:y,partner:"picky",v:3,max_stopovers:b,sort:"price",flight_type:"oneway",limit:10}});case 9:p=a.sent,i=p.data.data;case 11:return h=i.filter((function(e){return null!==e.availability.seats})).map((function(e){var t=e.id,a=e.dTime,n=e.price,r=e.fly_duration,c=e.availability,i=e.deep_link,o=e.route;return{id:t,date:Object(m.a)(Object(f.a)(a),"dd/MM/yyyy"),price:n,duration:r,availability:c,deepLink:i,stops:o.length-1}})),a.abrupt("return",{location:r,flights:h});case 13:case"end":return a.stop()}var u,g,v,y,b}),a)})));return function(e){return a.apply(this,arguments)}}())}function v(){return(v=Object(d.a)(u.a.mark((function e(t){var a,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=3,p();case 3:return a=e.sent,e.next=6,N(a.latitude,a.longitude);case 6:return n=e.sent,r=n.data.locations,c=r[0],e.next=11,Promise.all(g(c.code,t));case 11:i=e.sent,l((function(e){return Object(o.a)({},e,{currentLocation:c.city.name,data:i,loading:!1})}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return[function(e){return v.apply(this,arguments)},{data:r,currentLocation:c,loading:i}]},C={result:null,loading:!1,error:null};var _=function(){var e=Object(n.useState)(C),t=Object(s.a)(e,2),a=t[0],r=a.result,c=a.loading,i=a.error,l=t[1],p=w(),h=Object(s.a)(p,2),g=h[0],v=h[1],y=v.data,b=v.loading,E=M(),j=Object(s.a)(E,2),O=j[0],x=j[1],k=x.data,N=x.currentLocation,L=x.loading;function _(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=3;break}return e.next=3,g();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=3;break}return e.next=3,O(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=Object(n.useCallback)((function(e,t){return e.map((function(e){var a=Object(m.a)(Object(f.a)(e.EpochDate),"dd/MM/yyyy"),n=t.filter((function(e){return e.date===a})),r=e.Temperature,c=r.Maximum,i=r.Minimum;return{date:a,day:{text:e.Day.IconPhrase,icon:e.Day.Icon},night:{text:e.Night.IconPhrase,icon:e.Night.Icon},temperature:{minimum:i.Value,maximum:c.Value,unit:c.Unit},flights:n}}))}),[]),I=Object(n.useCallback)((function(e,t,a){var n=t.filter((function(t){return t.location===e}))[0].forecast.DailyForecasts,r=a.filter((function(t){return t.location===e}))[0].flights,c=D(n,r),i=!!N&&N.toLowerCase()===e.toLowerCase();return{location:e,results:c,isCurrentLocation:i}}),[D,N]);function B(){return(B=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=4,_();case 4:return e.next=6,A(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l((function(t){return Object(o.a)({},t,{error:e.t0,loading:!1})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){if(y&&k){var e=["Amsterdam","Budapest","Madrid"].map((function(e){return I(e,y,k)}));l((function(t){return Object(o.a)({},t,{result:e,loading:!1})}))}}),[I,N,y,k]),[function(e){return B.apply(this,arguments)},{result:r,loading:c,loadingFlights:L,loadingForecast:b,error:i}]};a(46);function S(e){var t=e.flights;return t?r.a.createElement("div",{className:"flights"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"flight-info"},r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Price:")," $",e.price),r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Duration:")," ",e.duration),r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Available seats:")," ",e.availability.seats),r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Stops:")," ",e.stops),r.a.createElement("div",{className:"flight-info-detail"},e.deepLink&&r.a.createElement("a",{className:"book-flight-link",href:e.deepLink,target:"_new"},"Book flight")))}))):r.a.createElement("div",null,"No flights found.")}function A(e){var t=e.id,a=e.title,n=e.day,c="".concat(a," during the ").concat(n?"day":"night",".");return r.a.createElement("img",{className:"weather-icon",title:c,alt:c,src:"https://www.accuweather.com/images/weathericons/".concat(t,".svg")})}var F=function(e){var t=e.result;return r.a.createElement("section",{className:"results"},t&&t.map((function(e){var t=e.isCurrentLocation?"current-location":"";return r.a.createElement("div",{key:e.location,className:"office-result ".concat(t)},r.a.createElement("h2",null,e.location),r.a.createElement("section",{className:"office-results"},e.results.map((function(t){return r.a.createElement("div",{key:t.date,className:"day"},r.a.createElement("div",{className:"date"},t.date),r.a.createElement("div",{className:"day-forecast"},r.a.createElement(A,{id:t.day.icon,title:t.day.text,day:!0})),r.a.createElement("div",{className:"night-forecast"},r.a.createElement(A,{id:t.night.icon,title:t.night.text,day:!1})),r.a.createElement("div",{className:"temp-forecast"},r.a.createElement("div",null,t.temperature.maximum,"\xb0"),r.a.createElement("div",null,t.temperature.minimum,"\xb0")),!e.isCurrentLocation&&r.a.createElement(S,{flights:t.flights}))}))),e.isCurrentLocation&&r.a.createElement("p",{className:"disclaimer"},"Not showing flights for your current location"))})))},D=(a(47),{max_stops:0});var I=function(){var e=_(),t=Object(s.a)(e,2),a=t[0],c=t[1],i=c.result,l=c.loading,u=c.loadingForecast,d=c.loadingFlights,m=c.error,f=Object(n.useState)(D),p=Object(s.a)(f,2),h=p[0],g=p[1];return Object(n.useEffect)((function(){i||l||m||a(h.max_stops)}),[h,i,l,m]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"preferences"},r.a.createElement("label",null,"Number of stops:"),r.a.createElement("input",{type:"number",onChange:function(e){return t=parseInt(e.target.value),void g((function(e){return Object(o.a)({},e,{max_stops:t})}));var t},value:h.max_stops}),r.a.createElement("button",{onClick:function(){return a(h.max_stops)}},"Update search")),m&&r.a.createElement("section",{className:"results main-msg"},m.message),!m&&(l||u||d)&&r.a.createElement("section",{className:"results main-msg"},l&&!d&&!u&&r.a.createElement("span",null,"Loading..."),u&&r.a.createElement("span",null,"Looking up for the weather..."),d&&r.a.createElement("span",null,"Finding cheap flight tickets...")),r.a.createElement(F,{result:i}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.500f822e.chunk.js.map