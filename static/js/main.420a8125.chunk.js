(this["webpackJsonpbest-office"]=this["webpackJsonpbest-office"]||[]).push([[0],{21:function(e,t,a){e.exports=a(47)},26:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(26),a(5)),u=a(7),s=a(4),l=a.n(s),p=a(8),d=a(49),f=a(48),m=a(9),y=a.n(m),h={params:{apikey:"81nSoYroYYJCdjfa7e4ATwvlZAx8Y7r7",metric:!0}},v=y.a.create({baseURL:"https://dataservice.accuweather.com",headers:{"Content-type":"application/json; charset=UTF-8",Accept:"application/json"}}),g=function(e){return v.get("/forecasts/v1/daily/5day/".concat(e),h)},b={loading:!1,error:null,data:null};var j=function(){var e=Object(n.useState)(b),t=Object(u.a)(e,2),a=t[0],r=a.data,c=a.loading,o=a.error,s=t[1];function d(){return(d=Object(p.a)(l.a.mark((function e(){var t,a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s((function(e){return Object(i.a)({},e,{loading:!0})})),e.next=4,g(249758);case 4:return t=e.sent,e.next=7,g(308526);case 7:return a=e.sent,e.next=10,g(187423);case 10:n=e.sent,r=[{location:"Amsterdam",forecast:t.data},{location:"Madrid",forecast:a.data},{location:"Budapest",forecast:n.data}],c=r.sort((function(e,t){return t.forecast.Headline.Severity-e.forecast.Headline.Severity})),s((function(e){return Object(i.a)({},e,{data:c,loading:!1})})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),s((function(t){return Object(i.a)({},t,{error:e.t0,loading:!1})}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return[function(){return d.apply(this,arguments)},{data:r,loading:c,error:o}]},O=a(50),x=y.a.create({baseURL:"https://api.skypicker.com/",headers:{"Content-type":"application/json; charset=UTF-8",Accept:"application/json"}}),E=function(e,t){return x.get("/locations",{params:{radius:50,type:"radius",locale:"en-US",location_types:"airport",limit:10,active_only:!0,sort:"name",lat:e,lon:t}})},w={loading:!1,error:null,data:null,currentLocation:null};var k=function(){var e=Object(n.useState)(w),t=Object(u.a)(e,2),a=t[0],r=a.data,c=a.currentLocation,o=a.loading,s=a.error,m=t[1];function y(){return h.apply(this,arguments)}function h(){return(h=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,n=a.latitude,r=a.longitude;e({latitude:n,longitude:r})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return[{city:"Amsterdam",code:"AMS"},{city:"Madrid",code:"MAD"},{city:"Budapest",code:"BUD"}].map(function(){var a=Object(p.a)(l.a.mark((function a(n){var r,c,o,i,u,s,p,m,y;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.city,c=n.code,o=[],i=new Date,u=Object(d.a)(i,"dd/MM/yyyy"),s=Object(O.a)(i,{days:4}),p=Object(d.a)(s,"dd/MM/yyyy"),e===c){a.next=11;break}return a.next=9,l=e,h=c,v=u,g=p,b=t,x.get("/flights",{params:{flyFrom:l,to:h,dateFrom:v,dateTo:g,partner:"picky",v:3,max_stopovers:b,sort:"price",flight_type:"oneway",limit:10}});case 9:m=a.sent,o=m.data.data;case 11:return y=o.filter((function(e){return null!==e.availability.seats})).map((function(e){var t=e.id,a=e.dTime,n=e.price,r=e.fly_duration,c=e.availability,o=e.deep_link;return{id:t,date:Object(d.a)(Object(f.a)(a),"dd/MM/yyyy"),price:n,duration:r,availability:c,deepLink:o}})),a.abrupt("return",{location:r,flights:y});case 13:case"end":return a.stop()}var l,h,v,g,b}),a)})));return function(e){return a.apply(this,arguments)}}())}function g(){return(g=Object(p.a)(l.a.mark((function e(t){var a,n,r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m((function(e){return Object(i.a)({},e,{loading:!0})})),e.next=4,y();case 4:return a=e.sent,e.next=7,E(a.latitude,a.longitude);case 7:return n=e.sent,r=n.data.locations,c=r[0],e.next=12,Promise.all(v(c.code,t));case 12:o=e.sent,m((function(e){return Object(i.a)({},e,{currentLocation:c.city.name,data:o,loading:!1})})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m((function(t){return Object(i.a)({},t,{error:e.t0,loading:!1})}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return[function(e){return g.apply(this,arguments)},{data:r,currentLocation:c,loading:o,error:s}]},N={result:null,loading:!1,error:null};var L=function(){var e=Object(n.useState)(N),t=Object(u.a)(e,2),a=t[0],r=a.result,c=a.loading,o=a.error,s=t[1],m=j(),y=Object(u.a)(m,2),h=y[0],v=y[1],g=v.data,b=v.loading,O=v.error,x=k(),E=Object(u.a)(x,2),w=E[0],L=E[1],M=L.data,_=L.currentLocation,A=L.loading,C=L.error;function S(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||O){e.next=3;break}return e.next=3,h();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A||C){e.next=3;break}return e.next=3,w(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s((function(e){return Object(i.a)({},e,{loading:!0})})),e.next=4,S();case 4:return e.next=6,U(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s((function(t){return Object(i.a)({},t,{error:e.t0,loading:!1})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){if(g&&M){var e=["Amsterdam","Budapest","Madrid"].map((function(e){var t=g.filter((function(t){return t.location===e}))[0].forecast.DailyForecasts,a=M.filter((function(t){return t.location===e}))[0].flights,n=t.map((function(e){var t=Object(d.a)(Object(f.a)(e.EpochDate),"dd/MM/yyyy"),n=a.filter((function(e){return e.date===t})),r=e.Temperature,c=r.Maximum,o=r.Minimum;return{date:t,day:e.Day.IconPhrase,night:e.Night.IconPhrase,temperature:{minimum:o.Value,maximum:c.Value,unit:c.Unit},flights:n}})),r=!!_&&_.toLowerCase()===e.toLowerCase();return{location:e,results:n,isCurrentLocation:r}}));s((function(t){return Object(i.a)({},t,{result:e,loading:!1})}))}}),[_,g,M]),[function(e){return P.apply(this,arguments)},{result:r,loading:c||A||b,error:o}]};a(45);function M(e){var t=e.flights;return t?r.a.createElement("div",{className:"flights"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"flight-info"},r.a.createElement("p",null,r.a.createElement("em",null,"Price:")," $",e.price),r.a.createElement("p",null,r.a.createElement("em",null,"Duration:")," ",e.duration),r.a.createElement("p",null,r.a.createElement("em",null,"Available seats:")," ",e.availability.seats),r.a.createElement("p",null,e.deepLink&&r.a.createElement("a",{href:e.deepLink,target:"_new"},"Book flight")))}))):r.a.createElement("div",null,"No flights found.")}var _=function(e){var t=e.result,a=e.loading;return!t||a?r.a.createElement("section",{className:"results loading"},"Loading..."):r.a.createElement("section",{className:"results"},t.map((function(e){var t=e.isCurrentLocation?"current-location":"";return r.a.createElement("div",{key:e.location,className:"office-result ".concat(t)},r.a.createElement("h2",null,e.location),r.a.createElement("section",{className:"results"},e.results.map((function(t){return r.a.createElement("div",{key:t.date,className:"day"},r.a.createElement("p",{className:"date"},t.date),r.a.createElement("p",{className:"day-forecast"},"Day: ",t.day),r.a.createElement("p",{className:"night-forecast"},"Night: ",t.night),r.a.createElement("p",{className:"temp-forecast"},t.temperature.maximum,"\xb0 / ",t.temperature.minimum,"\xb0"),e.isCurrentLocation?r.a.createElement("p",null,"Not showing flights for your current location"):r.a.createElement(M,{flights:t.flights}))}))))})))},A=(a(46),{max_stops:0});var C=function(){var e=L(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=c.result,s=c.loading,l=c.error,p=Object(n.useState)(A),d=Object(u.a)(p,2),f=d[0],m=d[1];return Object(n.useEffect)((function(){o||s||l||a(f.max_stops)}),[f,o,s,l]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"preferences"},r.a.createElement("label",null,"Number of stops:"),r.a.createElement("input",{type:"number",onChange:function(e){return t=parseInt(e.target.value),void m((function(e){return Object(i.a)({},e,{max_stops:t})}));var t},value:f.max_stops}),r.a.createElement("button",{onClick:function(){return a(f.max_stops)}},"Update search")),r.a.createElement(_,{result:o,loading:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.420a8125.chunk.js.map