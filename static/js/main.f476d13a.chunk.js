(this["webpackJsonpbest-office"]=this["webpackJsonpbest-office"]||[]).push([[0],{22:function(e,t,a){e.exports=a(48)},27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(27),a(5)),s=a(7),u=a(4),l=a.n(u),d=a(8),f=a(50),m=a(49),p=a(9),v=a.n(p),h=a(20),g=Object(h.setupCache)({maxAge:9e5});function y(e){return{baseURL:e,headers:{"Content-type":"application/json; charset=UTF-8",Accept:"application/json"},adapter:g.adapter}}var b={params:{apikey:"KIsxW2j8Qw9VyvXuc2WmCan2NI6amr3O",metric:!0}},j=v.a.create(y("https://dataservice.accuweather.com")),x=function(e){return j.get("/forecasts/v1/daily/5day/".concat(e),b)},E={loading:!1,error:null,data:null};var O=function(){var e=Object(n.useState)(E),t=Object(s.a)(e,2),a=t[0],r=a.data,c=a.loading,i=a.error,u=t[1];function f(){return(f=Object(d.a)(l.a.mark((function e(){var t,a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=4,x(249758);case 4:return t=e.sent,e.next=7,x(308526);case 7:return a=e.sent,e.next=10,x(187423);case 10:n=e.sent,r=[{location:"Amsterdam",forecast:t.data},{location:"Madrid",forecast:a.data},{location:"Budapest",forecast:n.data}],c=r.sort((function(e,t){return t.forecast.Headline.Severity-e.forecast.Headline.Severity})),u((function(e){return Object(o.a)({},e,{data:c,loading:!1})})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),u((function(t){return Object(o.a)({},t,{error:e.t0,loading:!1})}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return[function(){return f.apply(this,arguments)},{data:r,loading:c,error:i}]},w=a(51),k=v.a.create(y("https://api.skypicker.com/")),N=function(e,t){return k.get("/locations",{params:{radius:50,type:"radius",locale:"en-US",location_types:"airport",limit:10,active_only:!0,sort:"name",lat:e,lon:t}})},L={loading:!1,error:null,data:null,currentLocation:null};var M=function(){var e=Object(n.useState)(L),t=Object(s.a)(e,2),a=t[0],r=a.data,c=a.currentLocation,i=a.loading,u=a.error,p=t[1];function v(){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,n=a.latitude,r=a.longitude;e({latitude:n,longitude:r})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return[{city:"Amsterdam",code:"AMS"},{city:"Madrid",code:"MAD"},{city:"Budapest",code:"BUD"}].map(function(){var a=Object(d.a)(l.a.mark((function a(n){var r,c,i,o,s,u,d,p,v;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.city,c=n.code,i=[],o=new Date,s=Object(f.a)(o,"dd/MM/yyyy"),u=Object(w.a)(o,{days:4}),d=Object(f.a)(u,"dd/MM/yyyy"),e===c){a.next=11;break}return a.next=9,l=e,h=c,g=s,y=d,b=t,k.get("/flights",{params:{flyFrom:l,to:h,dateFrom:g,dateTo:y,partner:"picky",v:3,max_stopovers:b,sort:"price",flight_type:"oneway",limit:10}});case 9:p=a.sent,i=p.data.data;case 11:return v=i.filter((function(e){return null!==e.availability.seats})).map((function(e){var t=e.id,a=e.dTime,n=e.price,r=e.fly_duration,c=e.availability,i=e.deep_link;return{id:t,date:Object(f.a)(Object(m.a)(a),"dd/MM/yyyy"),price:n,duration:r,availability:c,deepLink:i}})),a.abrupt("return",{location:r,flights:v});case 13:case"end":return a.stop()}var l,h,g,y,b}),a)})));return function(e){return a.apply(this,arguments)}}())}function y(){return(y=Object(d.a)(l.a.mark((function e(t){var a,n,r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=4,v();case 4:return a=e.sent,e.next=7,N(a.latitude,a.longitude);case 7:return n=e.sent,r=n.data.locations,c=r[0],e.next=12,Promise.all(g(c.code,t));case 12:i=e.sent,p((function(e){return Object(o.a)({},e,{currentLocation:c.city.name,data:i,loading:!1})})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),p((function(t){return Object(o.a)({},t,{error:e.t0,loading:!1})}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return[function(e){return y.apply(this,arguments)},{data:r,currentLocation:c,loading:i,error:u}]},C={result:null,loading:!1,error:null};var _=function(){var e=Object(n.useState)(C),t=Object(s.a)(e,2),a=t[0],r=a.result,c=a.loading,i=a.error,u=t[1],p=O(),v=Object(s.a)(p,2),h=v[0],g=v[1],y=g.data,b=g.loading,j=g.error,x=M(),E=Object(s.a)(x,2),w=E[0],k=E[1],N=k.data,L=k.currentLocation,_=k.loading,A=k.error;function S(){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||j){e.next=3;break}return e.next=3,h();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_||A){e.next=3;break}return e.next=3,w(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u((function(e){return Object(o.a)({},e,{loading:!0})})),e.next=4,S();case 4:return e.next=6,I(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u((function(t){return Object(o.a)({},t,{error:e.t0,loading:!1})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){if(y&&N){var e=["Amsterdam","Budapest","Madrid"].map((function(e){var t=y.filter((function(t){return t.location===e}))[0].forecast.DailyForecasts,a=N.filter((function(t){return t.location===e}))[0].flights,n=t.map((function(e){var t=Object(f.a)(Object(m.a)(e.EpochDate),"dd/MM/yyyy"),n=a.filter((function(e){return e.date===t})),r=e.Temperature,c=r.Maximum,i=r.Minimum;return{date:t,day:{text:e.Day.IconPhrase,icon:e.Day.Icon},night:{text:e.Night.IconPhrase,icon:e.Night.Icon},temperature:{minimum:i.Value,maximum:c.Value,unit:c.Unit},flights:n}})),r=!!L&&L.toLowerCase()===e.toLowerCase();return{location:e,results:n,isCurrentLocation:r}}));u((function(t){return Object(o.a)({},t,{result:e,loading:!1})}))}}),[L,y,N]),[function(e){return P.apply(this,arguments)},{result:r,loading:c||_||b,error:i}]};a(46);function A(e){var t=e.flights;return t?r.a.createElement("div",{className:"flights"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"flight-info"},r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Price:")," $",e.price),r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Duration:")," ",e.duration),r.a.createElement("div",{className:"flight-info-detail"},r.a.createElement("em",null,"Available seats:")," ",e.availability.seats),r.a.createElement("div",{className:"flight-info-detail"},e.deepLink&&r.a.createElement("a",{className:"book-flight-link",href:e.deepLink,target:"_new"},"Book flight")))}))):r.a.createElement("div",null,"No flights found.")}function S(e){var t=e.id,a=e.title;return r.a.createElement("img",{className:"weather-icon",title:a,alt:a,src:"https://www.accuweather.com/images/weathericons/".concat(t,".svg")})}var D=function(e){var t=e.result,a=e.loading;return!t||a?r.a.createElement("section",{className:"results loading"},"Loading..."):r.a.createElement("section",{className:"results"},t.map((function(e){var t=e.isCurrentLocation?"current-location":"";return r.a.createElement("div",{key:e.location,className:"office-result ".concat(t)},r.a.createElement("h2",null,e.location),r.a.createElement("section",{className:"office-results"},e.results.map((function(t){return r.a.createElement("div",{key:t.date,className:"day"},r.a.createElement("div",{className:"date"},t.date),r.a.createElement("div",{className:"day-forecast"},r.a.createElement(S,{id:t.day.icon,title:t.day.text})),r.a.createElement("div",{className:"night-forecast"},r.a.createElement(S,{id:t.night.icon,title:t.night.text})),r.a.createElement("div",{className:"temp-forecast"},r.a.createElement("div",null,t.temperature.maximum,"\xb0"),r.a.createElement("div",null,t.temperature.minimum,"\xb0")),!e.isCurrentLocation&&r.a.createElement(A,{flights:t.flights}))}))),e.isCurrentLocation&&r.a.createElement("p",{className:"disclaimer"},"Not showing flights for your current location"))})))},I=(a(47),{max_stops:0});var B=function(){var e=_(),t=Object(s.a)(e,2),a=t[0],c=t[1],i=c.result,u=c.loading,l=c.error,d=Object(n.useState)(I),f=Object(s.a)(d,2),m=f[0],p=f[1];return Object(n.useEffect)((function(){i||u||l||a(m.max_stops)}),[m,i,u,l]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"preferences"},r.a.createElement("label",null,"Number of stops:"),r.a.createElement("input",{type:"number",onChange:function(e){return t=parseInt(e.target.value),void p((function(e){return Object(o.a)({},e,{max_stops:t})}));var t},value:m.max_stops}),r.a.createElement("button",{onClick:function(){return a(m.max_stops)}},"Update search")),r.a.createElement(D,{result:i,loading:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.f476d13a.chunk.js.map